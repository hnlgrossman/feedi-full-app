(function(){"use strict";var e={7081:function(e,t,n){var a=n(5130),s=n(6768);function i(e,t){const n=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(n,null,{default:(0,s.k6)((({Component:e})=>[(0,s.bF)(a.eB,null,{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e)))])),_:2},1024)])),_:1})}var o=n(1241);const r={},l=(0,o.A)(r,[["render",i]]);var u=l,d=n(1387),c=n(4232);const p=["dir"];function h(e,t,n,i,o,r){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",{id:"main_review_page",class:(0,c.C4)(o.lang+"_lang"),dir:"he"===o.lang?"rtl":"ltr"},[(0,s.bF)(a.eB,{name:"fade",mode:"out-in"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{lang:o.lang,langs:o.langs,onChangeLang:t[0]||(t[0]=e=>o.lang=e),onChangeLangs:t[1]||(t[1]=e=>o.langs=e),onFeedback:t[2]||(t[2]=e=>o.feedback=e),feedback:o.feedback,onFaqs:t[3]||(t[3]=e=>o.faqs=e),faqs:o.faqs,class:"child-view",user:o.user},null,8,["lang","langs","feedback","faqs","user"])])),_:1})],10,p)}n(4114);var m={data(){return{user:null,faqs:null,feedback:null,lang:"he",langs:[{key:"he",pic:"he_flag.png"},{key:"en",pic:"en_flag.png"},{key:"ru",pic:"ru_flag.png"}]}},mounted(){this.api({action:"user/"+this.$route.params.user_id,data:{},method:"get"},(e=>{e?this.user=e:(alert("עסק לא נמצא"),window.location="/")})),"review"===this.$route.name&&this.$router.push({name:"welcome"})}};const f=(0,o.A)(m,[["render",h]]);var g=f;const k={key:0,id:"welcome_page"},v=["onClick"],_=(0,s.Lk)("div",{class:"pic"},null,-1),x={class:"text_btn_container"},L={class:"text_container"},b=["textContent"],C=["textContent"],w={key:1},y=(0,s.Lk)("div",{class:"loader pic"},null,-1),D=[y];function E(e,t,n,a,i,o){const r=(0,s.g2)("router-link");return n.user?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",{class:(0,c.C4)(["langs",{open:i.langsOpen}])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.langs,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,c.C4)(["pic",(n.lang===e.key&&"active")+" "+e.key]),onClick:e=>o.selectLang(t),key:e.key},null,10,v)))),128))],2),_,(0,s.Lk)("div",x,[(0,s.Lk)("div",L,[(0,s.Lk)("h3",{textContent:(0,c.v_)(e.getLang(i.title,n.lang))},null,8,b),(0,s.Lk)("p",{textContent:(0,c.v_)(e.getLang(n.user.description,n.lang))},null,8,C)]),(0,s.bF)(r,{to:{name:"questions"},class:"btn big"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(e.getLang(i.btnText,n.lang)),1)])),_:1})])])):((0,s.uX)(),(0,s.CE)("div",w,D))}var U={props:["user","lang","langs"],data(){return{langsOpen:!1,title:{text:"נשמח לקבל את הביקורת שלך",textEn:"We would love to receive your review",textRu:"Мы будем рады получить ваш отзыв"},btnText:{text:"מתחילים",textEn:"starting",textRu:"начиная"}}},mounted(){},methods:{selectLang(e){this.$emit("changeLang",this.langs[e].key),this.$emit("changeLangs",this.array_move(this.langs,e,0)),this.langsOpen=!this.langsOpen}}};const q=(0,o.A)(U,[["render",E]]);var T=q;const $={key:0,id:"questions_page"},Q={class:"question_answers_process_container"},F={class:"question_process_container"},S=["textContent"],X={class:"process_status_container"},A=["textContent"],O=["onClick"],P=["textContent"];function I(e,t,n,a,i,o){const r=(0,s.gN)("click-away");return n.user?((0,s.uX)(),(0,s.CE)("div",$,[(0,s.Lk)("div",{class:"pic",style:(0,c.Tr)("background-image: url("+e.getPic(o.currentQuestion.pic)+")")},null,4),(0,s.Lk)("div",Q,[(0,s.Lk)("div",F,[(0,s.Lk)("p",{class:"question",textContent:(0,c.v_)(e.getLang(o.currentQuestion,n.lang))},null,8,S),(0,s.Lk)("div",X,[(0,s.Lk)("p",{class:"status",textContent:(0,c.v_)(o.status.text)},null,8,A),(0,s.Lk)("div",{class:"process_bar",style:(0,c.Tr)("--process: "+o.status.presents+"%;")},null,4)])]),(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{style:(0,c.Tr)("--text: '"+e.getLang(i.firstSelect,n.lang)+"'"),class:(0,c.C4)(["answers_container",{answer_select:null!=i.confirmAnswerIndex,first:1===o.currentStep}])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.currentQuestion.answers,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,c.C4)(["answer btn",{selected:i.confirmAnswerIndex===a}]),ref_for:!0,ref:"answer",onClick:e=>o.addAnswer(t.value,o.currentQuestion._id,a),key:a},[(0,s.Lk)("p",{class:"answer_text",textContent:(0,c.v_)(e.getLang(t,n.lang))},null,8,P)],10,O)))),128))],6)),[[r,()=>{i.confirmAnswerIndex=null}]])])])):(0,s.Q3)("",!0)}var R={props:["user","lang"],data(){return{confirmAnswerIndex:null,finishProcess:!1,formData:{faqs:[]},firstSelect:{text:"לחיצה נוספת לאישור",textRu:"Нажмите еще раз, чтобы подтвердить",textEn:"Click again to confirm"},statusText:[{text:"רק כמה שאלות לפניך",textRu:"Только пару вопросов",textEn:"Only a few questions"},{text:"עבודה טובה המשך כך",textRu:"Хорошая работа, продолжайте",textEn:"Good job, keep on going"},{text:"חצי דרך מאחוריך",textRu:"Прошли уже пол пути",textEn:"Halfway through"},{text:"כמעט סיימנו",textRu:"Почти закончили",textEn:"Almost done"},{text:"שאלה אחרונה ודי",textRu:"Последний вопрос и все",textEn:"One last question"},{text:"אלוף",textRu:"good",textEn:"good"}]}},methods:{addAnswer(e,t,n){if(this.confirmAnswerIndex===n){this.confirmAnswerIndex=null;const n=this.formData.faqs.findIndex((e=>e.question===t));n>-1&&this.formData.faqs.splice(n,1),this.formData.faqs.push({rating:e,question:t}),this.currentStep<this.user.questions.length?this.$router.push({params:{step:this.currentStep+1}}):(this.finishProcess=!0,this.$emit("faqs",this.formData.faqs),setTimeout((()=>{this.$router.push({name:"results",params:{status:this.status.statusReview}})}),700))}else this.confirmAnswerIndex=n}},computed:{currentStep(){return(+this.$route.params.step||1)<=this.user.questions.length?+this.$route.params.step||1:this.user.questions.length},currentQuestion(){return this.user.questions.length<this.currentStep?this.user.questions[this.user.questions.length-1]:this.user.questions[this.currentStep-1]},status(){let e,t="bad";e=this.finishProcess?100:(this.currentStep-1)/this.user.questions.length*100;let n=parseInt(e/(e/this.currentStep)-1);0===e&&(n=0),this.currentStep===this.user.questions.length&&(n=4),100===e&&(n=5);let a=this.getLang(this.statusText[n],this.lang);return{text:a,presents:e,statusReview:t}}}};const M=(0,o.A)(R,[["render",I]]);var J=M;const V={id:"admin_login"},j=(0,s.Lk)("div",{class:"user_icon_container"},[(0,s.Lk)("div",{class:"icon user_icon"})],-1),B=(0,s.Lk)("label",{for:"email"},"אימייל",-1),K=(0,s.Lk)("label",{for:"password"},"סיסמא",-1),z=(0,s.Lk)("input",{type:"submit",class:"btn big",value:"כניסה"},null,-1);function W(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",V,[j,(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{class:(0,c.C4)(["label_input_transition",{active:o.formData.email}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.email=e),type:"email",name:"email",id:"email"},null,512),[[a.Jo,o.formData.email]]),B],2),(0,s.Lk)("li",{class:(0,c.C4)(["label_input_transition",{active:o.formData.password}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.password=e),type:"password",name:"password",id:"password"},null,512),[[a.Jo,o.formData.password]]),K],2)]),z],32)])}var N={props:["user"],data(){return{formData:{email:"",password:""}}},mounted(){this.user&&this.$router.push({name:"admin"})},methods:{login(){this.api({action:"user/login",data:{...this.formData},method:"post"},(e=>{e&&(localStorage.setItem("user_token",e),this.$router.push({name:"admin"}).then((()=>{this.$router.go(0)})))}),(e=>{"invalid email or password."!==e.data||alert("אימייל או סיסמא לא נכונים")}))}}};const G=(0,o.A)(N,[["render",W]]);var Y=G;const H={key:0,id:"main_admin"},Z={key:0},ee={key:0,class:"open"},te=(0,s.Lk)("i",{class:"fas fa-times"},null,-1),ne=[te],ae={key:1,class:"close"},se=(0,s.Lk)("i",{class:"fas fa-bars"},null,-1),ie=[se],oe={id:"admin_content"};function re(e,t,n,a,i,o){const r=(0,s.g2)("router-link"),l=(0,s.g2)("SideBar"),u=(0,s.g2)("router-view");return i.user?._id||"admin_login"===e.$route.name?((0,s.uX)(),(0,s.CE)("div",H,["admin_login"!==e.$route.name?((0,s.uX)(),(0,s.CE)("header",Z,[(0,s.Lk)("div",{class:"hamburger",onClick:t[0]||(t[0]=e=>i.sideBarOpen=!0)},[i.sideBarOpen?((0,s.uX)(),(0,s.CE)("div",ee,ne)):((0,s.uX)(),(0,s.CE)("div",ae,ie))]),(0,s.bF)(r,{to:{name:"admin"},class:"logo_small"})])):(0,s.Q3)("",!0),(0,s.bF)(l,{active:i.sideBarOpen,onClose:t[1]||(t[1]=e=>i.sideBarOpen=!1),user:i.user},null,8,["active","user"]),(0,s.Lk)("div",oe,[(0,s.bF)(u,{user:i.user},null,8,["user"])])])):(0,s.Q3)("",!0)}const le={class:"side_bar_container"},ue={class:"icon_fa"},de=["textContent"],ce=(0,s.Lk)("div",{class:"icon_fa"},[(0,s.Lk)("i",{class:"fa-solid fa-right-from-bracket"})],-1),pe=(0,s.Lk)("span",null,"התנתק",-1),he=[ce,pe];function me(e,t,n,a,i,o){const r=(0,s.g2)("router-link"),l=(0,s.gN)("click-away");return"admin_login"!==e.$route.name?((0,s.uX)(),(0,s.CE)("div",{key:0,id:"side_bar",class:(0,c.C4)({active:n.active})},[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",le,[(0,s.bF)(r,{onClick:t[0]||(t[0]=t=>e.$emit("close")),to:{name:"admin"},class:"logo"}),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.sideBarMenu,((n,a)=>((0,s.uX)(),(0,s.Wv)(r,{onClick:t[1]||(t[1]=t=>e.$emit("close")),to:n.to,key:a},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ue,[(0,s.Lk)("i",{class:(0,c.C4)(n.fa_icon)},null,2)]),(0,s.Lk)("span",{textContent:(0,c.v_)(n.name)},null,8,de)])),_:2},1032,["to"])))),128)),(0,s.Lk)("a",{onClick:t[2]||(t[2]=(...t)=>e.logout&&e.logout(...t))},he)])])),[[l,()=>{n.active&&e.$emit("close")}]])],2)):(0,s.Q3)("",!0)}var fe={props:["active","user"],data(){return{sideBarMenu:[{name:"עריכת טופס",fa_icon:"fab fa-wpforms",to:{name:"edit_form"}},{name:"פידבקים",fa_icon:"far fa-comment-dots",to:{name:"feedbacks"}}]}},mounted(){this.sideBarMenu.push({name:"קישור (זמני)",fa_icon:"fas fa-link",to:{name:"review",params:{user_id:this.user?.id}}}),"admin"===this.user?.userType&&this.sideBarMenu.push({name:"הוספת משתמש",fa_icon:"fa-solid fa-user-tie",to:{name:"add_users"}})}};const ge=(0,o.A)(fe,[["render",me]]);var ke=ge,ve={components:{SideBar:ke},data(){return{sideBarOpen:!1,user:null}},mounted(){if(localStorage.getItem("user_token")){const e=this.decodeJwtToken(localStorage.getItem("user_token"));if(!e)return!1;this.api({action:"user/"+e._id,data:{},method:"get"},(e=>{e?this.user=e:this.$router.push({name:"admin_login"})}),(e=>{"not found"===e.data&&this.$router.push({name:"admin_login"}),this.$router.push({name:"admin_login"})}))}else this.$router.push({name:"admin_login"})},methods:{}};const _e=(0,o.A)(ve,[["render",re]]);var xe=_e;const Le={id:"main_edit_form"},be={class:"head"},Ce=(0,s.Lk)("div",null,[(0,s.Lk)("h1",null,"טופס שאלות"),(0,s.Lk)("p",null,"מינימום 3 עד 5 שאלות")],-1),we=(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),ye=[we],De={class:"questions_container"},Ee={class:"main_text"},Ue=(0,s.Lk)("label",null,"עריכת טקסט ראשי",-1),qe=["onClick"],Te={class:"actions"},$e=["onClick"],Qe=(0,s.Lk)("i",{class:"fa-solid fa-trash"},null,-1),Fe=[Qe],Se=["textContent"];function Xe(e,t,n,i,o,r){const l=(0,s.g2)("addQuestionPopup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(l,{onAddQuestion:r.addQuestion,onUpdateQuestion:r.updateQuestion,editQuestion:o.editQuestion,active:o.addQuestionPopupOpen,onClose:r.togglePopup},null,8,["onAddQuestion","onUpdateQuestion","editQuestion","active","onClose"]),(0,s.Lk)("div",Le,[(0,s.Lk)("div",be,[Ce,(0,s.Lk)("div",{class:"icon_container",onClick:t[0]||(t[0]=e=>r.togglePopup(!0))},ye)]),(0,s.Lk)("ul",De,[(0,s.Lk)("div",Ee,[Ue,(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.mainText=e),onInput:t[2]||(t[2]=()=>{!o.isEditMainText&&(o.isEditMainText=!0)})},null,544),[[a.Jo,o.mainText]]),(0,s.Lk)("div",{class:(0,c.C4)(["btn",{active:o.isEditMainText}]),onClick:t[3]||(t[3]=(...e)=>r.editMainText&&r.editMainText(...e))},"ערוך טקסט ראשי",2)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.questions,(t=>((0,s.uX)(),(0,s.CE)("li",{onClick:e=>r.togglePopup(t),class:"question",key:t._id},[(0,s.Lk)("div",Te,[(0,s.Lk)("div",{class:"delete",onClick:(0,a.D$)((e=>r.handleDelete(t._id)),["stop"])},Fe,8,$e)]),(0,s.Lk)("div",{class:"text",textContent:(0,c.v_)(t.text)},null,8,Se),(0,s.Lk)("div",{class:"pic",style:(0,c.Tr)("background-image: url("+e.getPic(t.pic)+");")},null,4)],8,qe)))),128))])])],64)}const Ae={class:"content"},Oe={class:"head"},Pe=(0,s.Lk)("h2",null,"הוספת שאלה",-1),Ie=(0,s.Lk)("i",{class:"fas fa-times"},null,-1),Re=[Ie],Me={class:"question_text"},Je=(0,s.Lk)("span",null,"העלה תמונה לשאלה",-1),Ve=[Je],je=(0,s.Lk)("i",{class:"fa-solid fa-trash"},null,-1),Be=[je],Ke=["value"],ze=["textContent"];function We(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",{id:"add_question_popup",class:(0,c.C4)({active:n.active})},[(0,s.Lk)("div",Ae,[(0,s.Lk)("div",Oe,[Pe,(0,s.Lk)("div",{class:"close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},Re)]),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)((e=>n.editQuestion?r.updateQuestion():r.addQuestion()),["prevent"]))},[(0,s.Lk)("div",Me,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.text=e),placeholder:"שאלה",required:""},null,512),[[a.Jo,o.formData.text]])]),(0,s.Lk)("div",{class:(0,c.C4)(["upload_pic_container",{pic_upload:o.formData.pic}])},[(0,s.Lk)("label",{for:"upload_file",class:"pic",style:(0,c.Tr)("background-image: url("+e.getPic(o.formData.pic)+");")},Ve,4),(0,s.Lk)("input",{type:"file",id:"upload_file",onChange:t[2]||(t[2]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e))},null,32),(0,s.Lk)("div",{class:"delete",onClick:t[3]||(t[3]=(0,a.D$)(((...e)=>r.handleDelete&&r.handleDelete(...e)),["stop"]))},Be)],2),(0,s.Lk)("input",{class:"btn",type:"submit",value:n.editQuestion?"עדכן שאלה":"הוסף שאלה"},null,8,Ke)],32),o.msg.text?((0,s.uX)(),(0,s.CE)("p",{key:0,class:"msg",textContent:(0,c.v_)(o.msg.text),style:(0,c.Tr)({color:o.msg.color})},null,12,ze)):(0,s.Q3)("",!0)])],2)}var Ne={props:["active","editQuestion"],data(){return{filesToDelete:[],formData:{text:"",pic:""},msg:{color:"",text:""}}},mounted(){},methods:{close(e=0){setTimeout((()=>{this.$emit("close"),this.formData={text:"",pic:""}}),e)},handleDelete(){this.deleteFiles(this.formData.pic),this.formData.pic=""},validate(){return this.formData.text?!!this.formData.pic||(this.msg.text="תמונה חובה",void(this.msg.color="red")):(this.msg.text="טקסט חובה",void(this.msg.color="red"))},resetForm(){this.formData={text:"",pic:""}},addQuestion(){if(!this.validate())return!1;this.api({action:"question",data:{...this.formData},method:"post"},(e=>{e&&(this.msg={text:"שאלה נוספה בהצלחה",color:"var(--color)"},this.$emit("addQuestion",e),this.resetForm())}),(e=>{console.error(e.data,"hnl")})),this.$emit("close")},updateQuestion(){if(!this.validate())return!1;this.api({action:"question/"+this.editQuestion._id,data:{text:this.formData.text,pic:this.formData.pic},method:"put"},(e=>{e&&(this.msg={text:"שאלה עודכנה בהצלחה",color:"var(--color)"},this.$emit("updateQuestion",e),this.resetForm())}),(e=>{console.error(e.data,"hnl")}))},async handleFileUpload(e){const t=e.target.files[0],n=["image/jpeg","image/jpg","image/png"];if(!t?.type)return!1;if(!n.includes(t.type))return this.msg.text="Filetype is wrong!!",void(this.msg.color="red");if(t.size>10485760)return this.msg.text="Too large, max size allowed is 10mb",void(this.msg.color="red");const a=new FormData;a.append("file",t);try{const e={Authorization:localStorage.getItem("user_token")},t=await this.axios.post(window.host_url+"upload_file",a,{headers:e});this.formData.pic&&this.deleteFiles(this.formData.pic),this.formData.pic=t.data.filename}catch(s){console.log(s),alert("בעיה בהעלאת תמונה צרו קשר עם מנהל האתר.")}},async deleteFiles(e){const t=await{Authorization:localStorage.getItem("user_token")};return await this.axios.delete(window.host_url+"upload_file",{data:{filesToDelete:e},headers:t})}},watch:{editQuestion(){this.editQuestion&&(this.formData=this.editQuestion)},active(){this.msg={color:"",text:""}}}};const Ge=(0,o.A)(Ne,[["render",We]]);var Ye=Ge,He={props:["user"],components:{addQuestionPopup:Ye},data(){return{mainText:"",isEditMainText:!1,editQuestion:null,addQuestionPopupOpen:!1,questions:[]}},mounted(){this.init(),this?.user?.description?.text&&(this.mainText=this.user.description.text)},methods:{editMainText(){if(this.isEditMainText){this.isEditMainText=!1;const e={description:{text:this.mainText}};this.api({action:"user/update_user?user_id="+this.user._id,data:e,method:"put"},(e=>{e&&console.log(e)}),(e=>{console.error(e.data,"hnl")}))}},togglePopup(e=!1){if(e)if("object"===typeof e)this.addQuestionPopupOpen=!0,this.editQuestion=e;else{if(this.questions.length>=5)return void alert("אין להוסיף יותר מ 5 שאלות");this.addQuestionPopupOpen=!0}else this.addQuestionPopupOpen=!1,this.editQuestion&&(this.editQuestion=null)},init(){this.api({action:"question?user_id="+this.user._id,data:{...this.formData},method:"get"},(e=>{e&&(this.questions=e)}),(e=>{console.error(e.data,"hnl")}))},handleDelete(e){this.api({action:"question/"+e,data:{},method:"delete"},(t=>{t&&(this.questions=this.questions.filter((t=>t._id!=e)))}),(e=>{console.error(e.data,"hnl")}))},addQuestion(){this.togglePopup(),this.init()},updateQuestion(){this.togglePopup(),this.init()}}};const Ze=(0,o.A)(He,[["render",Xe]]);var et=Ze;const tt={id:"add_users"},nt={class:"head"},at=(0,s.Lk)("h1",null,"משתמשים",-1),st=(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),it=[st],ot={class:"users_container"},rt=["onClick"],lt={class:"actions"},ut=["onClick"],dt=(0,s.Lk)("i",{class:"fa-solid fa-trash"},null,-1),ct=[dt],pt=["textContent"];function ht(e,t,n,i,o,r){const l=(0,s.g2)("addUserPopup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(l,{onAddUser:r.addUser,onUpdateUser:r.updateUser,editUser:o.editUser,active:o.addUserPopupOpen,onClose:r.handleClose},null,8,["onAddUser","onUpdateUser","editUser","active","onClose"]),(0,s.Lk)("div",tt,[(0,s.Lk)("div",nt,[at,(0,s.Lk)("div",{class:"icon_container",onClick:t[0]||(t[0]=e=>o.addUserPopupOpen=!0)},it)]),(0,s.Lk)("ul",ot,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.users,(e=>((0,s.uX)(),(0,s.CE)("li",{onClick:t=>{o.editUser=e,o.addUserPopupOpen=!0},class:"user",key:e._id},[(0,s.Lk)("div",lt,[(0,s.Lk)("div",{class:"delete",onClick:(0,a.D$)((t=>r.handleDelete(e._id)),["stop"])},ct,8,ut)]),(0,s.Lk)("div",{class:"text",textContent:(0,c.v_)(e.name)},null,8,pt)],8,rt)))),128))])])],64)}const mt={class:"content"},ft={class:"head"},gt=(0,s.Lk)("h2",null,"הוספת משתמש",-1),kt=(0,s.Lk)("i",{class:"fas fa-times"},null,-1),vt=[kt],_t=["required"],xt=(0,s.Lk)("option",{value:""},"בחר סוג משתמש",-1),Lt=(0,s.Lk)("option",{value:"business"},"עסק",-1),bt=(0,s.Lk)("option",{value:"admin"},"מנהל",-1),Ct=[xt,Lt,bt],wt=["value"],yt=["textContent"];function Dt(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",{id:"add_user_popup",class:(0,c.C4)({active:n.active})},[(0,s.Lk)("div",mt,[(0,s.Lk)("div",ft,[gt,(0,s.Lk)("div",{class:"close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},vt)]),(0,s.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)((e=>n.editUser?r.updateUser():r.addUser()),["prevent"]))},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.name=e),name:"name",placeholder:"שם"},null,512),[[a.Jo,o.formData.name]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.business_name=e),name:"business_name",placeholder:"שם העסק",required:""},null,512),[[a.Jo,o.formData.business_name]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.google_review_link=e),name:"google_review_link",placeholder:"לינק לדירוג",required:""},null,512),[[a.Jo,o.formData.google_review_link]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.email=e),name:"email",placeholder:"מייל",required:""},null,512),[[a.Jo,o.formData.email]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.phone=e),name:"phone",placeholder:"פאלפון"},null,512),[[a.Jo,o.formData.phone]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[6]||(t[6]=e=>o.formData.password=e),name:"password",placeholder:"סיסמא",required:!n.editUser},null,8,_t),[[a.Jo,o.formData.password]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("select",{required:"",name:"user_type","onUpdate:modelValue":t[7]||(t[7]=e=>o.formData.userType=e)},Ct,512),[[a.u1,o.formData.userType]])])]),(0,s.Lk)("input",{class:"btn",type:"submit",value:n.editUser?"עדכן משתמש":"הוסף שאלה"},null,8,wt)],32),o.msg.text?((0,s.uX)(),(0,s.CE)("p",{key:0,class:"msg",textContent:(0,c.v_)(o.msg.text),style:(0,c.Tr)({color:o.msg.color})},null,12,yt)):(0,s.Q3)("",!0)])],2)}var Et={props:["active","editUser"],data(){return{filesToDelete:[],formData:{name:"",business_name:"",google_review_link:"",email:"",phone:"",password:"",userType:""},msg:{color:"",text:""}}},mounted(){},methods:{close(e=0){setTimeout((()=>{this.$emit("close"),this.formData={text:"",pic:""}}),e)},handleDelete(){this.deleteFiles(this.formData.pic),this.formData.pic=""},validate(){return!0},addUser(){if(!this.validate())return!1;this.api({action:"user/signup",data:{...this.formData},method:"post"},(e=>{e&&(this.msg={text:"משתמש נוסף בהצלחה",color:"var(--color)"},this.$emit("addUser",e))}),(e=>{alert(e.data),console.error(e.data,"hnl")}))},updateUser(){if(!this.validate())return!1;""===this.formData.password&&delete this.formData.password,this.api({action:"user/update_user?user_id="+this.editUser._id,data:{...this.formData},method:"put"},(e=>{e&&(this.msg={text:"משתמש עודכן בהצלחה",color:"var(--color)"},this.$emit("updateUser",e))}),(e=>{console.error(e.data,"hnl")}))}},watch:{editUser(){this.editUser&&(this.formData=this.editUser)},active(){this.msg={color:"",text:""}}}};const Ut=(0,o.A)(Et,[["render",Dt]]);var qt=Ut,Tt={props:["user"],components:{addUserPopup:qt},data(){return{editUser:null,addUserPopupOpen:!1,users:[]}},mounted(){this.init()},methods:{init(){this.api({action:"user/users",data:{...this.formData},method:"get"},(e=>{e&&(this.users=e)}),(e=>{console.error(e.data,"hnl")}))},handleClose(){this.addUserPopupOpen=!1,this.editUser=null},handleDelete(e){this.api({action:"user/"+e,data:{},method:"delete"},(t=>{t&&(this.users=this.users.filter((t=>t._id!=e)))}),(e=>{console.error(e.data,"hnl")}))},addUser(){this.handleClose(),this.init()},updateUser(){this.handleClose(),this.init()}}};const $t=(0,o.A)(Tt,[["render",ht]]);var Qt=$t;const Ft={id:"results_page"},St={key:0,class:"bad_res"},Xt={class:"text_container"},At={class:"title_pic_container"},Ot=["textContent"],Pt=(0,s.Lk)("div",{class:"pic"},null,-1),It=["textContent"],Rt=(0,s.Lk)("div",{class:"loader pic"},null,-1),Mt={key:1,class:"good_res"},Jt={class:"text_container"},Vt={class:"title_pic_container"},jt=["textContent"],Bt=["textContent"],Kt=(0,s.Lk)("div",{class:"stars pic"},null,-1),zt=(0,s.Lk)("div",{class:"loader pic"},null,-1);function Wt(e,t,n,a,i,o){return(0,s.uX)(),(0,s.CE)("div",Ft,["bad"===this.$route.params.status?((0,s.uX)(),(0,s.CE)("div",St,[(0,s.Lk)("div",Xt,[(0,s.Lk)("div",At,[(0,s.Lk)("h2",{textContent:(0,c.v_)(e.getLang(i.badTitle,n.lang))},null,8,Ot),Pt]),(0,s.Lk)("p",{textContent:(0,c.v_)(e.getLang(i.badText,n.lang))},null,8,It)]),Rt])):(0,s.Q3)("",!0),"good"===this.$route.params.status?((0,s.uX)(),(0,s.CE)("div",Mt,[(0,s.Lk)("div",Jt,[(0,s.Lk)("div",Vt,[(0,s.Lk)("h2",{textContent:(0,c.v_)(e.getLang(i.goodTitle,n.lang))},null,8,jt)]),(0,s.Lk)("p",{textContent:(0,c.v_)(e.getLang(i.goodText,n.lang))},null,8,Bt),Kt]),zt])):(0,s.Q3)("",!0)])}var Nt={props:["faqs","user","lang"],data(){return{goodTitle:{text:"רק עוד רגע...",textEn:"Just a moment...",textRu:"Один Момент..."},badTitle:{text:"נראה שלא אהבתם...",textEn:"Looks like you didn't like it...",textRu:"Похоже, тебе это не понравилось..."},badText:{text:"אתם מועברים לדף יצירת הקשר של המסעדה השאירו לנו פרטים ונציג שלנו יחזור אליכם בהקדם האפשרי",textEn:"You are transferred to the restaurant's contact page. Leave us your details and our representative will get back to you as soon as possible",textRu:"Вы будете перенаправлены на страницу контактов ресторана. Оставьте нам свои данные, и наш представитель свяжется с вами как можно скорее."},goodText:{text:"הנך מועבר לדירוג הכוכבים של גוגל נשמח לדירוג הטוב ביותר :)",textEn:"You are transferred to the Google star rating, we will be happy for the best rating :)",textRu:"Вы переведены в звездный рейтинг Google, будем рады лучшей оценке :)"}}},mounted(){let e,t=2e3,n=Date.now();this.addFeedback();const a=Date.now()-n;t-=a,e="good"===this.$route.params.status?()=>{window.location=this.user.google_review_link,this.$router.push({name:"results",params:{status:this.status.statusReview}})}:()=>{this.$router.push({name:"contact"})},setTimeout(e,t)},methods:{addFeedback(){this.api({action:"feedback",data:{faqs:this.faqs},method:"post"},(e=>{e&&this.$emit("feedback",e)}),(e=>{console.error(e.data)}))}}};const Gt=(0,o.A)(Nt,[["render",Wt]]);var Yt=Gt;const Ht={id:"contact_page"},Zt=["textContent"],en=["textContent"],tn=["textContent"],nn=["textContent"],an=["value"];function sn(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",Ht,[(0,s.Lk)("h2",{textContent:(0,c.v_)(e.getLang(o.title,n.lang))},null,8,Zt),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>r.updateFeedback&&r.updateFeedback(...e)),["prevent"]))},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{class:(0,c.C4)(["label_input_transition",{active:o.formData.name}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.name=e),type:"text",name:"first_name",id:"first_name",required:""},null,512),[[a.Jo,o.formData.name]]),(0,s.Lk)("label",{for:"first_name",textContent:(0,c.v_)(e.getLang(o.firstName,n.lang))},null,8,en)],2),(0,s.Lk)("li",{class:(0,c.C4)(["label_input_transition",{active:o.formData.phone}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.phone=e),type:"tel",name:"tel",id:"phone",required:""},null,512),[[a.Jo,o.formData.phone]]),(0,s.Lk)("label",{for:"phone",textContent:(0,c.v_)(e.getLang(o.phone,n.lang))},null,8,tn)],2),(0,s.Lk)("li",{class:(0,c.C4)(["label_input_transition",{active:o.formData.note}])},[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.note=e),type:"text",name:"note",id:"note"},null,512),[[a.Jo,o.formData.note]]),(0,s.Lk)("label",{for:"note",textContent:(0,c.v_)(e.getLang(o.note,n.lang))},null,8,nn)],2)]),(0,s.Lk)("input",{type:"submit",class:"btn big",value:e.getLang(o.submit_text,n.lang)},null,8,an)],32)])}var on={props:["feedback","lang"],data(){return{formData:{name:"",phone:"",note:""},title:{text:"השאירו לנו פרטים ונציג שלנו יחזור אליכם בהקדם האפשרי",textEn:"Leave us details and our representative will get back to you as soon as possible",textRu:"Оставьте нам данные и наш представитель свяжется с вами в ближайшее время."},firstName:{text:"שם פרטי",textEn:"First name",textRu:"Имя"},phone:{text:"טלפון",textEn:"phone",textRu:"телефон"},note:{text:"הערות נוספות",textEn:"Additional Comments",textRu:"Дополнительные комментарии"},submit_text:{text:"שלח",textEn:"Send",textRu:"Отправлять"}}},mounted(){},methods:{updateFeedback(){this.api({action:"feedback/"+this.feedback._id,data:{...this.formData},method:"put"},(e=>{e&&this.$router.push({name:"thanks"})}),(e=>{console.error(e.data)}))}}};const rn=(0,o.A)(on,[["render",sn]]);var ln=rn;const un={id:"thanks_page"},dn=(0,s.Lk)("div",{class:"text_container"},[(0,s.Lk)("h2",null,"הפרטים נקלטו בהצלחה!"),(0,s.Lk)("p",null,"תודה על המשוב שלך בזכותך אנחנו ממשיכים לשפר את חווית הלקוח שלנו כל יום !")],-1),cn=(0,s.Lk)("div",{class:"pic"},null,-1),pn=[dn,cn];function hn(e,t,n,a,i,o){return(0,s.uX)(),(0,s.CE)("div",un,pn)}var mn={};const fn=(0,o.A)(mn,[["render",hn]]);var gn=fn;const kn={id:"feedbacks_page"},vn={class:"filters"},_n={class:"status_filter"},xn=(0,s.Lk)("label",{for:"statusSelect"},null,-1),Ln=["value","textContent"],bn={class:"date_filter"},Cn=(0,s.Lk)("label",{for:"dateInput"},"תאריך",-1),wn=(0,s.Lk)("ul",null,null,-1);function yn(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",kn,[(0,s.Lk)("div",vn,[(0,s.Lk)("div",_n,[xn,(0,s.bo)((0,s.Lk)("select",{id:"statusSelect","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedStatusFilter=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.filterStatus,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e.value,textContent:(0,c.v_)(e.name),key:e.value},null,8,Ln)))),128))],512),[[a.u1,o.selectedStatusFilter]])]),(0,s.Lk)("div",bn,[Cn,(0,s.bo)((0,s.Lk)("input",{type:"date",id:"dateInput","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedDateFilter=e)},null,512),[[a.Jo,o.selectedDateFilter]])])]),wn])}var Dn={props:["user"],data(){return{filterStatus:[{name:"לא טופל",value:"1"},{name:"בטיפול",value:"2"},{name:"טופל",value:"3"}],selectedStatusFilter:"",selectedDateFilter:"",feedbacks:[]}},mounted(){this.api({action:"feedback?user_id="+this.user._id,data:{},method:"get"},(e=>{e&&(this.feedbacks=e)}),(e=>{console.error(e.data,"hnl")}))}};const En=(0,o.A)(Dn,[["render",yn]]);var Un=En;const qn=[{path:"/review/:user_id/",name:"review",component:g,children:[{name:"welcome",path:"welcome",component:T},{name:"questions",path:"questions/:step?",component:J},{name:"results",path:"results/:status",component:Yt},{name:"contact",path:"contact",component:ln},{name:"thanks",path:"thanks",component:gn}]},{path:"/admin/",name:"admin",component:xe,children:[{name:"admin_login",path:"login",component:Y},{name:"edit_form",path:"edit_form",component:et},{name:"add_users",path:"add_users",component:Qt},{name:"feedbacks",path:"feedbacks",component:Un}]},{path:"/",redirect:"/admin"}],Tn=(0,d.aE)({history:(0,d.LA)(),routes:qn});var $n=Tn,Qn=n(4569),Fn=n.n(Qn);const Sn={data(){const e=window.host_url;return{user_admin:null,host_url:e}},methods:{getLang(e,t,n="text"){return e&&e[n]?"en"===t?e[n+"En"]:"ru"===t?e[n+"Ru"]:e[n]:""},array_move(e,t,n){if(n>=e.length){var a=n-e.length+1;while(a--)e.push(void 0)}return e.splice(n,0,e.splice(t,1)[0]),e},getPic(e){return this.host_url+"uploads/"+e},logout(){window.localStorage.setItem("user_token",""),window.location.reload()},api(e,t,n){t||(t=function(){});var a={"Content-Type":"application/json; charset=utf-8"};if(localStorage.getItem("user_token")&&(a.Authorization=localStorage.getItem("user_token")),"get"==e.method){let s=e.action;if(e.data)for(let t in e.data)s+="&"+t+"="+e.data[t];this.axios.get(window.api_url+s,{headers:a}).then((e=>{"auth-error"==e.data?(localStorage.setItem("user_token",null),window.location.reload()):t(e.data)}),(e=>{n?n(e):t(!1)}))}else"delete"===e.method?this.axios.delete(window.api_url+e.action,{data:e.data,headers:a}).then((e=>{"error"==e.data||("PERMS"==e.data.data?this.alert("אין לי הרשאה לעמוד הנוכחי"):t(e.data))})).catch((e=>{n&&n(e.response)})):this.axios[e.method](window.api_url+e.action,e.data,{headers:a}).then((e=>{"error"==e.data||("PERMS"==e.data.data?this.alert("אין לי הרשאה לעמוד הנוכחי"):t(e.data))})).catch((e=>{n&&n(e.response)}));return!0},decodeJwtToken(e){return Fn().decode(e)}}};var Xn=Sn,An=n(8355),On=n(6942),Pn=n(9294);class In{constructor(){this.events={}}$on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}$off(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}}$emit(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}var Rn=new In;window.host_url="/",window.api_url=window.host_url+"api/";const Mn=(0,a.Ef)(u);Mn.config.globalProperties.$bus=Rn,Mn.use($n),Mn.use(On.A,An.A),Mn.use(Pn.Ay),Mn.mixin(Xn),Mn.mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,a,s,i){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],i=e[d][2];for(var r=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,o=a[0],r=a[1],l=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var d=l(n)}for(t&&t(a);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},a=self["webpackChunkfeedi"]=self["webpackChunkfeedi"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(7081)}));a=n.O(a)})();
//# sourceMappingURL=app.b6902642.js.map